// Auto-generated by gulp-svg-sprite

$sprite-sheet: (
    'w': {{width}},
    'h': {{height}}
);
$icons: (
    {{#sprites}}
    '{{fileName}}': (
        'w': {{w}},
        'h': {{h}},
        'x': {{x}},
        'y': {{y}}
    ),
    {{/sprites}}
);

%sprite {
    display: inline-block;
    background-image: url("{{{cssPathSvg}}}");
    background-repeat: no-repeat;
    background-size: {{width}}{{units}} {{height}}{{units}};

    {{#cssPathNoSvg}}
    .lt-ie9 & {
        background-image: url("{{{cssPathNoSvg}}}");
    }
    {{/cssPathNoSvg}}
}

{{#sprites}}
%sprite-{{fileName}} {
    @extend %sprite;
    background-position: {{x}}{{units}} {{y}}{{units}};
    width: {{w}}{{units}};
    height: {{h}}{{units}};
}
{{/sprites}}

@mixin sprite($name: '', $width: false) {

    @if ($name != '') {

        $sprite-width: map-get($sprite-sheet, 'w');
        $sprite-height: map-get($sprite-sheet, 'h');

        $icon: map-get($icons, $name);
        $icon-width: map-get($icon, 'w');
        $icon-height: map-get($icon, 'h');
        $icon-pos-x: map-get($icon, 'x');
        $icon-pos-y: map-get($icon, 'y');

        // get the natural height/width ratio of the icon
        $icon-ratio: $icon-height / $icon-width;

        $new-sprite-width: $sprite-width / ($icon-width / $width);
        $new-sprite-height: $new-sprite-width / ($icon-width / $width);

        $new-icon-width: $width;
        $new-icon-height: $width * $icon-ratio;

        $new-icon-pos-x: $icon-pos-x * $icon-ratio;
        $new-icon-pos-y: $icon-pos-y * $icon-ratio;

        @extend %sprite;
        background-size: #{$new-sprite-width}px;
        background-position: #{$new-icon-pos-x}px #{$new-icon-pos-y}px;
        width: #{$new-icon-width}px;
        height: #{$new-icon-height}px;
    }
}

@mixin responsive-sprite($name){

    $sprite-width: map-get($sprite-sheet, 'w');
    $sprite-height: map-get($sprite-sheet, 'h');

    $icon: map-get($icons, $name);
    $icon-width: map-get($icon, 'w');
    $icon-height: map-get($icon, 'h');
    $icon-pos-x: map-get($icon, 'x');
    $icon-pos-y: map-get($icon, 'y');

    $pos-x: 0;
    $pos-y: 0;

    @if ($sprite-width - $icon-width) != 0 {
        $pos-x: ($icon-pos-x * -1) / ($sprite-width - $icon-width);
    }

    @if ($sprite-height - $icon-height) != 0 {
        $pos-y: ($icon-pos-y * -1) / ($sprite-height - $icon-height);
    }

    @extend %sprite;
    width: 100%;
    display: block;
    height: 0;
    padding-bottom: percentage($icon-height / $icon-width);
    background-size: percentage($sprite-width / $icon-width) percentage($sprite-height / $icon-height);
    background-position: percentage($pos-x) percentage($pos-y);
}

{{#sprites}}
.sprite-{{fileName}} {
    @include responsive-sprite({{fileName}});
}
{{/sprites}}
